{"version":3,"file":"static/js/817.aa929c32.chunk.js","mappings":"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","sources":["common/constant.js","components/album-cover/style.js","components/album-cover/index.js","services/album.js","pages/discover/c-pages/album/store/actionCreator.js","pages/discover/c-pages/album/style.js","pages/discover/c-pages/album/index.js"],"sourcesContent":["export const HOT_RECOMMEND_LIMIT = 8;\r\nexport const NEW_ALBUM_LIMIT = 10;\r\n\r\nexport const TOP_ALBUM_PAGE_LIMIT = 30;\r\n\r\nwindow.onerror = function (e) {\r\n  console.log('window.onerror=>', e)\r\n}","import styled from 'styled-components';\r\n\r\nexport const AlbumWrapper = styled.div`\r\n  .album-image {\r\n    position: relative;\r\n    width: ${props => props.width};\r\n    height: ${props => props.size};\r\n    overflow: hidden;\r\n    margin-top: 15px;\r\n\r\n    img {\r\n      width: ${props => props.size};\r\n      height: ${props => props.size};\r\n    }\r\n\r\n    .cover {\r\n      position: absolute;\r\n      left: 0;\r\n      right: 0;\r\n      top: 0;\r\n      bottom: 0;\r\n      background-position: 0 ${props => props.bgp};\r\n      text-indent: -9999px;\r\n    }\r\n  }\r\n\r\n  .album-info {\r\n    font-size: 12px;\r\n    width: ${props => props.size};\r\n    .name {\r\n      color: #000;\r\n      white-space: nowrap;\r\n      text-overflow: ellipsis;\r\n      overflow: hidden;\r\n    }\r\n\r\n    .artist {\r\n      color: #666;\r\n    }\r\n  }\r\n`","import React, { memo } from 'react';\r\n\r\nimport {\r\n  getSizeImage\r\n} from \"@/utils/format-utils\";\r\n\r\nimport {\r\n  AlbumWrapper\r\n} from \"./style\";\r\n\r\nexport default memo(function YAlbumCover(props) {\r\n  const { info, size = \"100px\", width = \"118px\", bgp = \"-570px\" } = props;\r\n\r\n  return (\r\n    <AlbumWrapper size={size} width={width} bgp={bgp}>\r\n      <div className=\"album-image\">\r\n        <img src={getSizeImage(info.picUrl, 150)} alt=\"\" />\r\n        <a href=\"/abc\" className=\"cover sprite_covor\">{info.name}</a>\r\n      </div>\r\n      <div className=\"album-info\">\r\n        <div className=\"name\">{info.name}</div>\r\n        <div className=\"artist\">{info.artist.name}</div>\r\n      </div>\r\n    </AlbumWrapper>\r\n  )\r\n})\r\n","import request from './request';\r\n\r\nexport function getHotAlbums() {\r\n  return request({\r\n    url: \"/album/newest\"\r\n  })\r\n}\r\n\r\nexport function getTopAlbums(limit, offset) {\r\n  return request({\r\n    url: \"/top/album\",\r\n    params: {\r\n      limit,\r\n      offset\r\n    }\r\n  })\r\n}","import {\r\n  getHotAlbums,\r\n  getTopAlbums\r\n} from '../../../../../services/album'\r\nimport * as actionType from './constants'\r\nimport {\r\n  TOP_ALBUM_PAGE_LIMIT\r\n} from '@/common/constant'\r\n\r\nconst changeHotAlbumsAction = (albums) => ({\r\n  type: actionType.CHANGE_HOT_ALBUMS,\r\n  hotAlbumsList: albums,\r\n})\r\n\r\nconst changeTopAlbumAction = (albums) => ({\r\n  type: actionType.CHANGE_TOP_ALBUMS,\r\n  topAlbumsList: albums\r\n})\r\n\r\nconst changeAlbumsTotal = (total) => ({\r\n  type: actionType.CHANGE_ALBUMS_TOATAL,\r\n  albumTotal: total\r\n})\r\n\r\nexport const getHotAlbumsAction = function () {\r\n  return (dispatch) => {\r\n    getHotAlbums().then(res => {\r\n      res && res.code === 200 && res.albums &&\r\n        dispatch(changeHotAlbumsAction(res.albums));\r\n    }).catch(err => {\r\n      console.error('album-actionCreator=>', err);\r\n    });\r\n  }\r\n}\r\n\r\nexport const getTopAlbumsAction = function (page = 1) {\r\n  return (dispatch) => {\r\n    getTopAlbums(TOP_ALBUM_PAGE_LIMIT, (page - 1) * TOP_ALBUM_PAGE_LIMIT).then(res => {\r\n      res && res.code === 200 && res.albums &&\r\n        dispatch(changeTopAlbumAction(res.albums));\r\n      dispatch(changeAlbumsTotal(res.total));\r\n    }).catch(err => {\r\n      console.error('getTopAlbums err', err);\r\n    });\r\n  }\r\n}\r\n\r\n\r\n","import styled from 'styled-components'\r\n\r\nexport const AlbumWrapper = styled.div`\r\n  width: 100%;\r\n  background-color: #f5f5f5;;\r\n  .content{\r\n    background-color: #fff;\r\n  padding: 40px;\r\n  }\r\n  .title{\r\n    line-height: 44px;\r\n    font-size: 24px;\r\n    padding-bottom: 5px;\r\n    border-bottom: 2px solid #c20c0c;\r\n  }\r\n\r\n  .album-list{\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n  }\r\n  .pagination{\r\n    width: max-content;\r\n    margin: 30px auto 10px;\r\n    .ant-pagination-item-active{\r\n      background-color: #c20c0c;\r\n      border:none;\r\n      a{\r\n        color: #fff;\r\n      }\r\n    }\r\n    .ant-pagination-item:hover{\r\n      border-color:#c20c0c;\r\n      transition: all 0.3s;\r\n      a{\r\n        color: #c20c0c;\r\n      }\r\n    }\r\n    .ant-pagination-item-active:hover a{\r\n      color: #fff;\r\n    }\r\n    .ant-pagination-prev:hover .ant-pagination-item-link:not([disabled]),\r\n    .ant-pagination-next:hover .ant-pagination-item-link:not([disabled]){\r\n      color: #c20c0c;\r\n      border-color: #c20c0c;\r\n    }\r\n\r\n    .ant-pagination-jump-prev .ant-pagination-item-container .ant-pagination-item-link-icon,\r\n    .ant-pagination-jump-next .ant-pagination-item-container .ant-pagination-item-link-icon {\r\n      color: #c20c0c;\r\n    }\r\n  }\r\n`","// 导入第三方库文件\r\nimport { memo, useCallback, useEffect, useState } from \"react\";\r\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\r\n\r\n// 导入工具类\r\nimport {\r\n  getHotAlbumsAction, getTopAlbumsAction\r\n} from './store/actionCreator'\r\nimport { TOP_ALBUM_PAGE_LIMIT } from '@/common/constant'\r\n\r\n// 导入组件\r\nimport YAlbumCover from '@/components/album-cover'\r\nimport {\r\n  Pagination\r\n} from 'antd'\r\nimport {\r\n  AlbumWrapper\r\n} from './style'\r\n\r\nexport default memo((props) => {\r\n  // state\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n\r\n  // redux hooks\r\n  const dispatch = useDispatch();\r\n\r\n  const { hotAlbumsList = [],\r\n    topAlbumsList = [], albumTotal = 0 } = useSelector((state) => {\r\n      return {\r\n        hotAlbumsList: state.getIn(['album', 'hotAlbumsList']),\r\n        topAlbumsList: state.getIn(['album', 'topAlbumsList']),\r\n        albumTotal: state.getIn(['album', 'albumTotal'])\r\n      };\r\n    }, shallowEqual);\r\n  // console.log(albumTotal);\r\n  // console.log('hotAlbumsList,topAlbumsList=>', hotAlbumsList, topAlbumsList);\r\n\r\n  // other hooks\r\n  useEffect(() => {\r\n    dispatch(getHotAlbumsAction());\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    dispatch(getTopAlbumsAction(currentPage));\r\n  }, [dispatch, currentPage]);\r\n\r\n  const pageChange = useCallback((page, pageSize) => {\r\n    // console.log('pageChange', page, pageSize);\r\n    setCurrentPage(page);\r\n  }, []);\r\n  // other func\r\n\r\n  // render \r\n  return (\r\n    <AlbumWrapper>\r\n      <div className='content wrap-v2'>\r\n\r\n        <AlbumTitle title='热门新碟' />\r\n        <div className=\"album-list\">\r\n          {\r\n            hotAlbumsList.slice(0, 10).map((item, index) => {\r\n              return <YAlbumCover size={\"130px\"}\r\n                width={\"153px\"}\r\n                bgp={\"-845px\"}\r\n                key={item.id}\r\n                info={item} />\r\n            })\r\n          }\r\n        </div>\r\n\r\n        <AlbumTitle title='全部新碟' />\r\n        <div className=\"album-list\">\r\n          {\r\n            topAlbumsList.map((item, index) => {\r\n              return <YAlbumCover size={\"130px\"}\r\n                width={\"153px\"}\r\n                bgp={\"-845px\"}\r\n                key={item.id}\r\n                info={item} />\r\n            })\r\n          }\r\n        </div>\r\n\r\n        {/* 分页器 */}\r\n        <div className=\"pagination\">\r\n          <Pagination\r\n            total={albumTotal}\r\n            defaultPageSize={TOP_ALBUM_PAGE_LIMIT}\r\n            current={currentPage}\r\n            showSizeChanger={false}\r\n            onChange={pageChange}\r\n          />\r\n        </div>\r\n      </div>\r\n    </AlbumWrapper>\r\n  )\r\n})\r\n\r\nfunction AlbumTitle(props) {\r\n  return (\r\n    <h2 className='title'>{props.title ? props.title : '默认标题'}</h2>\r\n  )\r\n}"],"names":["HOT_RECOMMEND_LIMIT","NEW_ALBUM_LIMIT","TOP_ALBUM_PAGE_LIMIT","window","onerror","e","console","log","AlbumWrapper","styled","props","width","size","bgp","memo","info","className","src","getSizeImage","picUrl","alt","href","name","artist","getTopAlbums","limit","offset","request","url","params","changeTopAlbumAction","albums","type","actionType","topAlbumsList","changeAlbumsTotal","total","albumTotal","getHotAlbumsAction","dispatch","then","res","code","hotAlbumsList","catch","err","error","useState","currentPage","setCurrentPage","useDispatch","useSelector","state","getIn","shallowEqual","useEffect","page","getTopAlbumsAction","pageChange","useCallback","pageSize","AlbumTitle","title","slice","map","item","index","id","defaultPageSize","current","showSizeChanger","onChange"],"sourceRoot":""}